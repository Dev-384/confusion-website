<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Confusion</title>
		<link rel="stylesheet" href="/styles/theme.css">
		<link rel="stylesheet" href="/styles/dashboard.css">
		<link rel="shortcut icon" href="/assets/favicon.png" type="image/*">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
	</head>

	<body class="column v-center" style="gap: 3rem;">

		<template from="/components" id="theme-change-cover"></template>

		<template from="/components" id="nav"></template>

		<section style="height: min-content;">
			<div id="panel-lables" class="column" style="background-color: color-mix(in srgb, var(--accent), transparent 75%); padding: 1rem; border-radius: 1rem;">
				<button class="row v-center" panel="projects">
					<span class="icon-lightbulb"></span>
					Projects
				</button>
				<button class="row v-center" panel="preferences">
					<span class="icon-gear"></span>
					Preferences
				</button>
			</div>
			<div id="panel-holder" style="width: 100%;">
				<div id="projects" class="column" style="width: 100%;">

					<div class="row v-center card constant" style="width: 100%; background-color: var(--primary); justify-content: space-between; padding: 1rem 3rem">
						<h3 style="margin: 0px; color: var(--background);">Projects</h3>
						<span class="icon-plus" style="background-color: var(--background);" onclick="document.getElementById('project-create').showModal()"></span>
					</div>

					<dialog id="project-create">
						<h4 style="margin-top: 0px;">Create Project</h4>
						<span class="icon-close" style="position: absolute; top: 1rem; right: 1rem" onclick="document.getElementById('project-create').close()"></span>
						<input type="text" id="projectNameInput" class="button" placeholder="Enter project name">
						<select id="projectType">
							<option value="" disabled selected>Select Project Type</option>
							<option value="code">Code</option>
							<option value="note">Note</option>
							<option value="art">Art</option>
						</select>
						<br><br>
						<button class="button" onclick="document.getElementById('project-create').close(); addProject();">Add Project</button>
					</dialog>

					<div id="project-list"></div>
				</div>
				<div id="preferences">
					<div class="row v-center card constant" style="width: 100%; background-color: var(--primary); justify-content: space-between; padding: 1rem 3rem">
						<h3 style="margin: 0px; color: var(--background);">Preferences</h3>
					</div>
					<p>Nothing's here!</p>
				</div>
			</div>
		</section>

		<template from="/components" id="footer"></template>

		<script src="/index.js" type="module" defer></script>
		<script src="./dashboard.js"></script>

		<script>
			const panel = new class Panel {
				panelHolder = document.getElementById("panel-holder");

				constructor() {
					for (let panel of this.panelHolder.children) {
						if (panel == this.panelHolder.firstElementChild) panel.classList.add("show");
						else panel.classList.add("hide");
					}
				}

				show(panelName="") {
					document.querySelector("div#panel-holder div.show").classList.add("hide");
					document.querySelector("div#panel-holder div.show").classList.remove("show");
					document.querySelector("div#panel-holder div#"+panelName).classList.remove("hide");
					document.querySelector("div#panel-holder div#"+panelName).classList.add("show");

					document.querySelector("div#panel-lables button.show").classList.add("hide");
					document.querySelector("div#panel-lables button.show").classList.remove("show");
					document.querySelector("div#panel-lables button[panel=\""+panelName+"\"]").classList.remove("hide");
					document.querySelector("div#panel-lables button[panel=\""+panelName+"\"]").classList.add("show");
				}
			}

			const panelLables = document.querySelectorAll("div#panel-lables button[panel]");

			for (let i = 0; i < panelLables.length; i ++) {
				let currentPanel = panelLables[i];
				let panelAttribute = currentPanel.getAttribute("panel");
				if (i == 0) currentPanel.classList.add("show");
				currentPanel.onclick = () => {
					panel.show(panelAttribute);
				}
			}
		</script>

	</body>
</html>